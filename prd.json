{
  "project": "Orbiter Web",
  "branchName": "ralph/orbiter-web",
  "description": "Orbiter Web \u2014 comprehensive AI agent platform with visual workflow canvas, multi-agent orchestration, real-time monitoring, RAG pipeline, plugin marketplace, and five application types. Built as Astro 5.x + FastAPI single deployable unit.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Astro 5.x package scaffolding",
      "description": "As a developer, I need the orbiter-web package initialized with Astro 5.x and TypeScript so that frontend development can begin.",
      "acceptanceCriteria": [
        "packages/orbiter-web/ directory created",
        "package.json with astro@5.x, typescript dependencies",
        "tsconfig.json with strict mode enabled",
        "astro.config.mjs configured with static output mode",
        "src/pages/index.astro placeholder page exists",
        "npm install succeeds without errors",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "From PRD US-001 (part 1/7)"
    },
    {
      "id": "US-002",
      "title": "Tailwind CSS v4 with design tokens",
      "description": "As a developer, I need Tailwind CSS v4 configured with the design system color tokens so that all components use consistent styling.",
      "acceptanceCriteria": [
        "tailwindcss and @tailwindcss/vite installed",
        "Tailwind integrated via @tailwindcss/vite in astro.config.mjs (NOT @astrojs/tailwind)",
        "src/styles/global.css created with @theme {} block",
        "Color variables configured: --zen-paper (#f2f0e3), --zen-dark (#2e2e2e), --zen-muted, --zen-subtle",
        "Accent colors: coral (#F76F53), zen-blue (#6287f5), zen-green (#63f78b)",
        "Dark mode variables under [data-theme='dark']: --zen-paper (#1f1f1f), --zen-dark (#d1cfc0)",
        "Tailwind theme maps paper, dark, coral, zen-blue, zen-green to CSS variables",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "From PRD US-001 (part 2/7)"
    },
    {
      "id": "US-003",
      "title": "Font setup (Bricolage Grotesque + Junicode)",
      "description": "As a developer, I need the project fonts configured so that typography matches the design system.",
      "acceptanceCriteria": [
        "@fontsource/bricolage-grotesque installed (weights 400-700)",
        "Junicode woff2 files placed in public/fonts/ (Roman and Italic variants)",
        "@font-face declarations in global.css for Junicode",
        "Body font set to Bricolage Grotesque, weight 500 default",
        "font-junicode utility class available for display headings",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "From PRD US-001 (part 3/7)"
    },
    {
      "id": "US-004",
      "title": "cn() utility and TypeScript config",
      "description": "As a developer, I need the cn() class merging utility so that components can accept class props without conflicts.",
      "acceptanceCriteria": [
        "clsx and tailwind-merge installed",
        "src/utils/merge.ts exports cn() function wrapping clsx + twMerge",
        "cn() correctly merges conflicting Tailwind classes",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "From PRD US-001 (part 4/7)"
    },
    {
      "id": "US-005",
      "title": "BaseLayout.astro with theme detection",
      "description": "As a developer, I need the base HTML layout with theme detection and animation support so that all pages have consistent behavior.",
      "acceptanceCriteria": [
        "src/layouts/BaseLayout.astro created with html/head/body shell",
        "Imports global.css with font and theme tokens",
        "Blocking inline script for theme detection: localStorage -> prefers-color-scheme -> 'light' default",
        "Sets data-theme attribute on <html> before first paint",
        "IntersectionObserver script for data-animate elements (zenReveal, zenFade, zenScale keyframes)",
        "SEOHead component with basic meta tags",
        "prefers-reduced-motion respected",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 5,
      "passes": true,
      "notes": "From PRD US-001 (part 5/7)"
    },
    {
      "id": "US-006",
      "title": "Python FastAPI server foundation",
      "description": "As a developer, I need the embedded Python API server scaffolded so that backend development can begin.",
      "acceptanceCriteria": [
        "packages/orbiter-web/pyproject.toml created with fastapi, uvicorn, aiosqlite dependencies",
        "packages/orbiter-web/src/orbiter_web/__init__.py created",
        "packages/orbiter-web/src/orbiter_web/app.py with basic FastAPI app instance",
        "packages/orbiter-web/src/orbiter_web/config.py with Settings class (database_url, secret_key, debug)",
        "Health check endpoint: GET /api/health returns {status: 'ok'}",
        "Package added to workspace uv sync succeeds",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": "From PRD US-001 (part 6/7)"
    },
    {
      "id": "US-007",
      "title": "Dev server script",
      "description": "As a developer, I need a single command to start both the Astro and FastAPI dev servers so that development is seamless.",
      "acceptanceCriteria": [
        "npm run dev starts both Astro dev server and FastAPI uvicorn server",
        "Astro proxies /api/* requests to FastAPI backend",
        "Both servers reload on file changes",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": "From PRD US-001 (part 7/7)"
    },
    {
      "id": "US-008",
      "title": "Button component",
      "description": "As a developer, I need a reusable Button component matching the design system so that all buttons are visually consistent.",
      "acceptanceCriteria": [
        "src/components/Button.astro created",
        "Polymorphic: renders <a> if href prop given, <button> otherwise",
        "Three variants: Primary (bg-dark text-paper), Bordered (border-2 border-dark/80, fills on hover), Default",
        "hover:scale-[1.02] active:scale-[0.98] micro-interaction, 200ms transition",
        "rounded-xl for links, rounded-lg for buttons",
        "Uses cn() for class merging, accepts class prop",
        "Dark mode works correctly",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 8,
      "passes": true,
      "notes": "From PRD US-002 (part 1/5)"
    },
    {
      "id": "US-009",
      "title": "Card component",
      "description": "As a developer, I need a reusable Card component with hover lift effect so that content containers are consistent.",
      "acceptanceCriteria": [
        "src/components/Card.astro created",
        "Polymorphic element tag (div/article/section via as prop)",
        "Base: rounded-xl bg-subtle/80 border border-dark/[0.08]",
        "Hover: lifts up 2px (-translate-y-0.5), increases border opacity, adds shadow, 300ms transition",
        "Uses cn() for class merging, accepts class prop",
        "Dark mode works correctly",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 9,
      "passes": true,
      "notes": "From PRD US-002 (part 2/5)"
    },
    {
      "id": "US-010",
      "title": "Input and Select components",
      "description": "As a developer, I need Input and Select form components so that all forms use consistent styling.",
      "acceptanceCriteria": [
        "src/components/Input.astro created with label, placeholder, error state, required indicator",
        "src/components/Select.astro created with label, options, error state",
        "Both use design system colors: bg-paper border border-dark/[0.08] rounded-lg",
        "Error state: red border, error message text below",
        "Focus ring with coral accent",
        "Both use cn(), accept class prop, dark mode support",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 10,
      "passes": true,
      "notes": "From PRD US-002 (part 3/5)"
    },
    {
      "id": "US-011",
      "title": "Badge and Modal components",
      "description": "As a developer, I need Badge and Modal components for status indicators and dialogs.",
      "acceptanceCriteria": [
        "src/components/Badge.astro created: rounded-full pill, configurable color (coral, zen-blue, zen-green, default)",
        "src/components/Modal.astro created: overlay dialog with backdrop blur-sm",
        "Modal has slide-in animation, close button, click-outside-to-close",
        "Modal accepts title prop and default slot for content",
        "Both use cn(), accept class prop, dark mode support",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 11,
      "passes": true,
      "notes": "From PRD US-002 (part 4/5)"
    },
    {
      "id": "US-012",
      "title": "Tabs and Toast components",
      "description": "As a developer, I need Tabs and Toast components for navigation and notifications.",
      "acceptanceCriteria": [
        "src/components/Tabs.astro created: tab navigation with active indicator using coral accent",
        "CSS-only tab switching where possible, minimal JS fallback",
        "src/components/Toast.astro created: notification with success/error/info variants",
        "Toast auto-dismisses after configurable timeout, close button",
        "Section pattern utility: section-divider class with gradient line and container (mx-auto max-w-6xl px-4 sm:px-6 lg:px-8)",
        "Both use cn(), accept class prop, dark mode support",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 12,
      "passes": true,
      "notes": "From PRD US-002 (part 5/5)"
    },
    {
      "id": "US-013",
      "title": "PageLayout with collapsible sidebar",
      "description": "As a user, I need an application shell with sidebar navigation so I can move between platform sections.",
      "acceptanceCriteria": [
        "src/layouts/PageLayout.astro created extending BaseLayout",
        "Collapsible left sidebar (NOT top navbar \u2014 this is an app, not a marketing site)",
        "Sidebar sections: Projects, Agents, Workflows, Playground, Tools, Models, Knowledge Base, Monitoring, Plugins, Settings",
        "Each section has an icon and label",
        "Sidebar collapses to icon-only on smaller screens (< lg breakpoint)",
        "bg-paper for light mode sidebar, bg-dark for dark mode",
        "Active nav item highlighted with coral accent",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 13,
      "passes": true,
      "notes": "From PRD US-003 (part 1/2)"
    },
    {
      "id": "US-014",
      "title": "Top bar, breadcrumbs, and responsive navigation",
      "description": "As a user, I need a top bar with search and responsive mobile navigation so I can navigate efficiently on any device.",
      "acceptanceCriteria": [
        "Top bar with: current project name, search trigger (Cmd+K placeholder), theme toggle, user menu",
        "Breadcrumb navigation component showing current location",
        "Keyboard shortcut Cmd+B to toggle sidebar collapse",
        "Mobile (< md): sidebar becomes bottom tab bar with key sections",
        "Hamburger menu on mobile for full nav access",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 14,
      "passes": true,
      "notes": "From PRD US-003 (part 2/2)"
    },
    {
      "id": "US-015",
      "title": "SQLite database foundation",
      "description": "As a developer, I need a database module with migrations so that the backend can persist data.",
      "acceptanceCriteria": [
        "orbiter_web/database.py with aiosqlite connection management (get_db context manager)",
        "Migration system: sequential SQL files in orbiter_web/migrations/",
        "Migration runner that tracks applied migrations in a _migrations table",
        "Initial migration 001: create users table (id, email, password_hash, created_at)",
        "Initial migration 002: create projects table (id, name, description, default_model, default_provider, user_id, created_at, updated_at)",
        "Database auto-creates on first run if not exists",
        "Typecheck passes"
      ],
      "priority": 15,
      "passes": true,
      "notes": "From PRD US-004 + US-005 (database foundation)"
    },
    {
      "id": "US-016",
      "title": "Projects REST API",
      "description": "As a developer, I need CRUD endpoints for projects so that the frontend can manage projects.",
      "acceptanceCriteria": [
        "GET /api/projects returns list of projects for authenticated user",
        "POST /api/projects creates project with name (required) and description",
        "GET /api/projects/:id returns single project",
        "PUT /api/projects/:id updates project name, description, default_model, default_provider",
        "DELETE /api/projects/:id deletes project with cascading cleanup",
        "Input validation with proper error responses (422 for validation, 404 for not found)",
        "Typecheck passes"
      ],
      "priority": 16,
      "passes": true,
      "notes": "From PRD US-004"
    },
    {
      "id": "US-017",
      "title": "Projects UI pages",
      "description": "As a user, I want to see and manage my projects through the web interface.",
      "acceptanceCriteria": [
        "Projects list page at /projects with card grid showing: name, description, agent count, last modified",
        "Create project dialog (Modal) with name and description fields",
        "Project detail page at /projects/:id showing project info",
        "Rename and delete actions with confirmation dialog for delete",
        "Empty state when no projects exist with 'Create your first project' CTA",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 17,
      "passes": true,
      "notes": "From PRD US-004"
    },
    {
      "id": "US-018",
      "title": "Authentication backend",
      "description": "As a developer, I need auth endpoints so that the platform is secured.",
      "acceptanceCriteria": [
        "POST /api/auth/login accepts email + password, validates against bcrypt hash, sets HTTP-only session cookie",
        "POST /api/auth/logout clears session cookie",
        "GET /api/auth/me returns current user info or 401",
        "Password hashing with bcrypt (via passlib or bcrypt package)",
        "Session management via HTTP-only cookies with configurable expiry",
        "Protected route middleware: dependency that extracts user from cookie or returns 401",
        "Typecheck passes"
      ],
      "priority": 18,
      "passes": true,
      "notes": "From PRD US-005"
    },
    {
      "id": "US-019",
      "title": "Login page and Settings UI",
      "description": "As a user, I need a login page and settings to configure my workspace.",
      "acceptanceCriteria": [
        "Login page at /login with email/password form",
        "Unauthenticated users redirected to /login (client-side check)",
        "Settings page at /settings with sections: Profile, Appearance, API Keys, Workspace",
        "Appearance: theme preference (light/dark/system) persisted to user settings",
        "Workspace: default project selector, default model provider, concurrent run limit input",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 19,
      "passes": true,
      "notes": "From PRD US-005"
    },
    {
      "id": "US-020",
      "title": "Provider schema and encrypted key storage",
      "description": "As a developer, I need a database schema for model providers with encrypted API key storage.",
      "acceptanceCriteria": [
        "Migration: providers table (id, name, provider_type, encrypted_api_key, base_url, max_retries, timeout, user_id, created_at)",
        "provider_type enum: openai, anthropic, gemini, vertex, ollama, custom",
        "Fernet symmetric encryption for API keys (cryptography package)",
        "Encryption key derived from app secret_key",
        "Encrypt on write, decrypt on read \u2014 keys never stored in plaintext",
        "Typecheck passes"
      ],
      "priority": 20,
      "passes": true,
      "notes": "From PRD US-006"
    },
    {
      "id": "US-021",
      "title": "Provider CRUD REST API",
      "description": "As a developer, I need endpoints to manage model providers.",
      "acceptanceCriteria": [
        "GET /api/providers returns list of configured providers (api_key masked in response)",
        "POST /api/providers creates provider with name, provider_type, api_key, base_url, max_retries, timeout",
        "GET /api/providers/:id returns single provider",
        "PUT /api/providers/:id updates provider config",
        "DELETE /api/providers/:id removes provider",
        "POST /api/providers/:id/test validates API key by making lightweight API call to provider",
        "Test returns {success: true/false, error: string|null, latency_ms: number}",
        "Typecheck passes"
      ],
      "priority": 21,
      "passes": true,
      "notes": "From PRD US-006"
    },
    {
      "id": "US-022",
      "title": "Settings > Models page UI",
      "description": "As a user, I want to configure model providers through the Settings UI.",
      "acceptanceCriteria": [
        "Settings > Models page listing all configured providers",
        "Provider cards showing: provider name, icon (per provider type), status (connected/error), key count",
        "Add provider form: name, provider type dropdown, API key input, optional base_url",
        "Edit and delete provider actions",
        "Test Connection button that calls POST /api/providers/:id/test and shows result",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 22,
      "passes": true,
      "notes": "From PRD US-006"
    },
    {
      "id": "US-023",
      "title": "Multi-key load balancing backend",
      "description": "As a developer, I need multiple API keys per provider with load balancing and failover.",
      "acceptanceCriteria": [
        "Migration: provider_keys table (id, provider_id, encrypted_key, label, strategy_position, status, error_count, last_used, cooldown_until)",
        "Load balancing strategies: round_robin, random, least_recently_used",
        "Auto-failover: on 429 status, mark key as rate_limited with cooldown, switch to next",
        "Key health status: active (green), rate_limited (yellow, with cooldown_until), invalid (red)",
        "Per-key usage stats: total_requests, total_tokens, error_count, last_used",
        "GET/POST /api/providers/:id/keys, DELETE /api/providers/:id/keys/:keyId",
        "Typecheck passes"
      ],
      "priority": 23,
      "passes": true,
      "notes": "From PRD US-007"
    },
    {
      "id": "US-024",
      "title": "Multi-key management UI",
      "description": "As a user, I want to manage multiple API keys per provider with health monitoring.",
      "acceptanceCriteria": [
        "Key list section on provider detail showing all keys with labels",
        "Add key form: API key input, optional label (e.g. 'Production', 'Backup')",
        "Health status indicators: green dot (active), yellow dot (rate limited), red dot (invalid)",
        "Per-key stats display: requests, tokens, errors, last used",
        "Cooldown timer for rate-limited keys",
        "Load balancing strategy selector dropdown",
        "Delete key with confirmation",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 24,
      "passes": true,
      "notes": "From PRD US-007"
    },
    {
      "id": "US-025",
      "title": "Model catalog backend and REST API",
      "description": "As a developer, I need endpoints to discover and manage available models.",
      "acceptanceCriteria": [
        "Migration: models table (id, provider_id, model_name, context_window, capabilities, pricing_input, pricing_output, is_custom)",
        "GET /api/models returns all models across configured providers with filter support",
        "POST /api/providers/:id/discover queries provider API for available models and upserts to DB",
        "POST /api/models for manual model entry (custom/fine-tuned models)",
        "Default model setting: stored in workspace settings and project settings",
        "Typecheck passes"
      ],
      "priority": 25,
      "passes": true,
      "notes": "From PRD US-008"
    },
    {
      "id": "US-026",
      "title": "Model catalog page UI",
      "description": "As a user, I want to browse available models and select the right one for each agent.",
      "acceptanceCriteria": [
        "Models page with card grid of all available models",
        "Model card: name, provider icon, context window, pricing (if known), capability tags (chat, embedding, vision, reasoning)",
        "Filter by: provider dropdown, capability multi-select, context window range",
        "Fetch Models button per provider that triggers POST /api/providers/:id/discover",
        "Manual model entry form for custom models",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 26,
      "passes": true,
      "notes": "From PRD US-008"
    },
    {
      "id": "US-027",
      "title": "Model comparison view",
      "description": "As a user, I want to compare models side-by-side to choose the best one.",
      "acceptanceCriteria": [
        "Model comparison view: select 2-3 models via checkboxes",
        "Side-by-side display: name, provider, context window, input pricing, output pricing, capabilities",
        "Highlight differences between models",
        "Default model setting at workspace and project level (dropdown in settings)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 27,
      "passes": true,
      "notes": "From PRD US-008"
    },
    {
      "id": "US-028",
      "title": "Application schema and REST API",
      "description": "As a developer, I need a schema and endpoints for the five application types.",
      "acceptanceCriteria": [
        "Migration: applications table (id, name, type, project_id, config_json, status, last_run_at, created_at, updated_at)",
        "type enum: chatbot, chatflow, workflow, agent, text_generator",
        "POST /api/applications with required type field",
        "GET /api/applications with optional project_id filter",
        "GET/PUT/DELETE /api/applications/:id",
        "POST /api/applications/:id/duplicate creates copy with '(Copy)' suffix",
        "Typecheck passes"
      ],
      "priority": 28,
      "passes": true,
      "notes": "From PRD US-009"
    },
    {
      "id": "US-029",
      "title": "New Application dialog UI",
      "description": "As a user, I want to create new applications by choosing from five types.",
      "acceptanceCriteria": [
        "New Application dialog with five type cards in a grid",
        "Chatbot card: icon, 'Single-agent conversational app with memory'",
        "Chatflow card: icon, 'Multi-turn conversational workflow with branching'",
        "Workflow card: icon, 'DAG-based automation pipeline (no chat interface)'",
        "Agent card: icon, 'Autonomous agent with tools and reasoning'",
        "Text Generator card: icon, 'Single-shot text generation with templates'",
        "Each card shows use case examples",
        "Selecting type and confirming creates application and navigates to builder",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 29,
      "passes": true,
      "notes": "From PRD US-009"
    },
    {
      "id": "US-030",
      "title": "Application list page",
      "description": "As a user, I want to see all my applications with their type and status.",
      "acceptanceCriteria": [
        "Application list page at /applications with grid/list view toggle",
        "Each app shows: name, type badge (colored per type), status, last run timestamp",
        "Filter by type, search by name",
        "Duplicate action on each application card",
        "Click navigates to the appropriate builder (form-based or canvas-based depending on type)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 30,
      "passes": true,
      "notes": "From PRD US-009"
    },
    {
      "id": "US-031",
      "title": "Agent schema and REST API",
      "description": "As a developer, I need a schema and endpoints for agent CRUD matching Orbiter's AgentConfig.",
      "acceptanceCriteria": [
        "Migration: agents table (id, name, description, instructions, model_provider, model_name, temperature, max_tokens, max_steps, output_type_json, tools_json, handoffs_json, hooks_json, project_id, created_at, updated_at)",
        "GET /api/agents with optional project_id filter",
        "POST /api/agents creates agent with validation (name required)",
        "GET /api/agents/:id returns full agent config",
        "PUT /api/agents/:id updates agent",
        "DELETE /api/agents/:id deletes agent",
        "Typecheck passes"
      ],
      "priority": 31,
      "passes": true,
      "notes": "From PRD US-010"
    },
    {
      "id": "US-032",
      "title": "Agent builder - Basic and Model tabs",
      "description": "As a user, I want to configure an agent's basic info and model settings.",
      "acceptanceCriteria": [
        "Agent builder page at /agents/:id/edit with tabbed form",
        "Basic tab: name (required), description, instructions/system prompt (multi-line textarea with monospace font)",
        "Model tab: provider selector (populated from configured providers), model selector (populated from provider's models)",
        "Temperature slider 0.0-2.0 with numeric display",
        "max_tokens number input",
        "Preview showing provider:model_name string format",
        "Save button calls PUT /api/agents/:id",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 32,
      "passes": true,
      "notes": "From PRD US-010 (part 1/3)"
    },
    {
      "id": "US-033",
      "title": "Agent builder - Tools and Handoffs tabs",
      "description": "As a user, I want to assign tools and handoff targets to my agent.",
      "acceptanceCriteria": [
        "Tools tab: list of currently assigned tools",
        "Add tool button opens tool selector modal (lists available tools from /api/tools)",
        "Remove tool button on each assigned tool",
        "Drag to reorder tool priority",
        "Handoffs tab: list of other agents this agent can hand off to",
        "Add handoff agent button opens agent selector modal",
        "Remove handoff button on each listed agent",
        "Changes saved via PUT /api/agents/:id",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 33,
      "passes": true,
      "notes": "From PRD US-010 (part 2/3)"
    },
    {
      "id": "US-034",
      "title": "Agent builder - Hooks and Advanced tabs",
      "description": "As a user, I want to configure lifecycle hooks and advanced settings for my agent.",
      "acceptanceCriteria": [
        "Hooks tab: list of HookPoint values (before_model_call, after_model_call, before_tool_call, after_tool_call, on_error)",
        "Each hook point can have a function name/code reference attached",
        "Advanced tab: max_steps slider 1-100",
        "output_type: JSON schema editor textarea (validates JSON on blur)",
        "Memory toggle (on/off)",
        "Context toggle (on/off)",
        "Form validation with inline error messages for invalid JSON",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 34,
      "passes": true,
      "notes": "From PRD US-010 (part 3/3)"
    },
    {
      "id": "US-035",
      "title": "System prompt editor with variable detection",
      "description": "As a user, I want a rich prompt editor that detects variables and counts tokens.",
      "acceptanceCriteria": [
        "Enhanced instructions editor on agent builder Basic tab (replaces plain textarea)",
        "Syntax highlighting for {{variable_name}} patterns (colored differently from plain text)",
        "Variable panel on the right showing all detected variables",
        "Each variable has: name, type selector (string/number/boolean), default value input",
        "Token counter at bottom showing estimated input tokens for current prompt text",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 35,
      "passes": true,
      "notes": "From PRD US-011 (part 1/3)"
    },
    {
      "id": "US-036",
      "title": "Prompt template library and test prompt",
      "description": "As a user, I want to save and reuse prompt templates, and test prompts against models.",
      "acceptanceCriteria": [
        "Migration: prompt_templates table (id, name, content, variables_json, user_id, created_at)",
        "Save current prompt as template button",
        "Load template dropdown/modal showing saved templates",
        "Test Prompt button: sends prompt to selected model with sample variable values filled in",
        "Test result displayed in a panel below the editor",
        "Import/export prompts as JSON files",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 36,
      "passes": true,
      "notes": "From PRD US-011 (part 2/3)"
    },
    {
      "id": "US-037",
      "title": "Prompt model comparison and version history",
      "description": "As a user, I want to compare prompt outputs across models and track prompt versions.",
      "acceptanceCriteria": [
        "Model comparison mode: select 2-3 models, send same prompt to all, show outputs side-by-side",
        "Per-model metrics: response time, token count, cost estimate",
        "Prompt version history: every save creates a version in prompt_versions table",
        "Diff view between any two versions (side-by-side highlighting changes)",
        "Restore previous version button",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 37,
      "passes": true,
      "notes": "From PRD US-011 (part 3/3)"
    },
    {
      "id": "US-038",
      "title": "Role-based agent persona section",
      "description": "As a user, I want to define agent personas with role, goal, and backstory for multi-agent crews.",
      "acceptanceCriteria": [
        "Optional Persona section in agent builder (collapsible)",
        "Fields: Role (short text, e.g. 'Senior Research Analyst'), Goal (text), Backstory (textarea)",
        "When set, these fields are auto-injected into the system prompt with clear formatting",
        "Persona templates dropdown: Researcher, Writer, Coder, Reviewer, Planner (pre-fills fields)",
        "Preview button showing full system prompt with persona fields expanded",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 38,
      "passes": true,
      "notes": "From PRD US-012"
    },
    {
      "id": "US-039",
      "title": "AI-assisted agent builder backend",
      "description": "As a developer, I need an endpoint that generates agent configurations from natural language.",
      "acceptanceCriteria": [
        "POST /api/agents/ai-generate accepts {description: string, model?: string}",
        "Uses configured default model to generate: agent name, role/goal/backstory, system prompt, suggested tools list, suggested model",
        "For multi-agent descriptions, generates array of agent configs with task assignments",
        "Returns generated config as JSON for review (does not auto-save)",
        "Typecheck passes"
      ],
      "priority": 39,
      "passes": true,
      "notes": "From PRD US-013"
    },
    {
      "id": "US-040",
      "title": "AI-assisted agent builder UI",
      "description": "As a user, I want to describe what I need in natural language and get a generated agent config.",
      "acceptanceCriteria": [
        "AI Builder button in agent creation flow",
        "Natural language text input with placeholder: 'Describe the agent you need...'",
        "Submit sends to POST /api/agents/ai-generate",
        "Generated configuration shown in a review panel: name, role, prompt, tools, model",
        "Each field is editable before confirming",
        "Confirm button creates the agent with the reviewed config",
        "Loading state while AI generates",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 40,
      "passes": true,
      "notes": "From PRD US-013"
    },
    {
      "id": "US-041",
      "title": "Xyflow React island setup",
      "description": "As a developer, I need the Xyflow canvas embedded as an Astro island so the visual workflow builder has a foundation.",
      "acceptanceCriteria": [
        "React 19 and @xyflow/react installed as dependencies",
        "@astrojs/react integration added to astro.config.mjs",
        "src/islands/Canvas/ directory created with CanvasIsland.tsx entry point",
        "Canvas component wrapped with ReactFlowProvider",
        "Canvas renders within PageLayout, fills available space (flex-1)",
        "Dark mode: canvas background matches theme (warm paper light / warm charcoal dark)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 41,
      "passes": true,
      "notes": "From PRD US-014 (part 1/3)"
    },
    {
      "id": "US-042",
      "title": "Canvas pan, zoom, grid, and minimap",
      "description": "As a user, I want smooth canvas navigation with zoom, pan, and a minimap.",
      "acceptanceCriteria": [
        "Mouse wheel zoom with smooth animation",
        "Click-drag to pan the canvas",
        "Minimap component in bottom-right corner",
        "Grid background with dot pattern",
        "Snap-to-grid for node placement (configurable grid size)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 42,
      "passes": true,
      "notes": "From PRD US-014 (part 2/3)"
    },
    {
      "id": "US-043",
      "title": "Canvas toolbar and keyboard shortcuts",
      "description": "As a user, I want canvas controls and keyboard shortcuts for efficient workflow editing.",
      "acceptanceCriteria": [
        "Canvas toolbar (top or floating): zoom in, zoom out, fit view, lock/unlock toggle",
        "Undo/redo buttons in toolbar",
        "Keyboard shortcuts: Delete (remove selected), Cmd+Z (undo), Cmd+Shift+Z (redo), Cmd+A (select all)",
        "Shortcuts shown as tooltips on toolbar buttons",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 43,
      "passes": true,
      "notes": "From PRD US-014 (part 3/3)"
    },
    {
      "id": "US-044",
      "title": "Canvas state persistence",
      "description": "As a developer, I need canvas state saved and loaded from the backend.",
      "acceptanceCriteria": [
        "Save canvas state (nodes, edges, viewport) to PUT /api/workflows/:id",
        "Load canvas state from GET /api/workflows/:id on page load",
        "Canvas state includes: node positions, node configs, edges, viewport transform",
        "Serialization to JSON for storage",
        "Typecheck passes"
      ],
      "priority": 44,
      "passes": true,
      "notes": "From PRD US-014 + US-018"
    },
    {
      "id": "US-045",
      "title": "Node sidebar with categorized types",
      "description": "As a user, I want a sidebar with all available node types organized by category.",
      "acceptanceCriteria": [
        "Left sidebar panel (or collapsible) showing node categories",
        "Triggers category: Chat Input, Webhook, Schedule, Manual",
        "LLM category: LLM Call, Prompt Template, Model Selector",
        "Agent category: Agent Node, Sub-Agent",
        "Tools category: Function Tool, HTTP Request, Code (Python), Code (JavaScript)",
        "Logic category: Conditional (if/else), Switch, Loop/Iterator, Aggregator",
        "Data category: Variable Assigner, Template (Jinja), JSON Transform, Text Splitter",
        "Knowledge category: Knowledge Retrieval, Document Loader, Embedding Node",
        "Output category: Chat Response, API Response, File Output, Notification",
        "Integration category: Webhook Call, MCP Client",
        "Each node type has a distinct icon and color accent per category",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 45,
      "passes": true,
      "notes": "From PRD US-015"
    },
    {
      "id": "US-046",
      "title": "Node drag-and-drop and search",
      "description": "As a user, I want to drag nodes from the sidebar onto the canvas and search for node types.",
      "acceptanceCriteria": [
        "Drag node type from sidebar onto canvas to create a new node instance",
        "Node appears at drop position with default configuration",
        "Search/filter input at top of node sidebar",
        "Search matches node type name and category",
        "Filtered results update in real-time as user types",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 46,
      "passes": true,
      "notes": "From PRD US-015"
    },
    {
      "id": "US-047",
      "title": "Node configuration panel shell",
      "description": "As a user, I want to click a node to configure it in a side panel.",
      "acceptanceCriteria": [
        "Clicking a node opens a right-side configuration panel (slide-in animation)",
        "Panel does not obscure canvas (canvas area shrinks or panel overlays with close button)",
        "Panel header: editable node name field, node type label",
        "Panel body: placeholder for node-type-specific fields",
        "Close panel by clicking X, clicking empty canvas, or pressing Escape",
        "Config changes auto-save with 500ms debounce",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 47,
      "passes": false,
      "notes": "From PRD US-016"
    },
    {
      "id": "US-048",
      "title": "LLM Call and Agent node configuration",
      "description": "As a user, I want to configure LLM Call and Agent node properties.",
      "acceptanceCriteria": [
        "LLM Call node config: model selector dropdown, prompt textarea with {{variable}} support, temperature slider, max_tokens input, response format selector (text/json)",
        "Agent node config: dropdown to select existing agent from /api/agents, or 'Create Inline' option",
        "Inline agent config: name, model, instructions, tool assignments (simplified form)",
        "Both node configs show in the right-side panel when node is selected",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 48,
      "passes": false,
      "notes": "From PRD US-016"
    },
    {
      "id": "US-049",
      "title": "Conditional, Code, and HTTP node configuration",
      "description": "As a user, I want to configure logic, code execution, and HTTP request nodes.",
      "acceptanceCriteria": [
        "Conditional node: condition expression editor (text input), true/false labeled output handles",
        "Code node: embedded code editor with syntax highlighting (CodeMirror or textarea with monospace)",
        "Code node supports Python and JavaScript with language toggle",
        "HTTP Request node: method dropdown (GET/POST/PUT/DELETE), URL input, headers key-value editor, body textarea, auth selector",
        "All configs render in the right-side panel",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 49,
      "passes": false,
      "notes": "From PRD US-016"
    },
    {
      "id": "US-050",
      "title": "Knowledge Retrieval node config and validation",
      "description": "As a user, I want to configure Knowledge Retrieval nodes and see validation errors.",
      "acceptanceCriteria": [
        "Knowledge Retrieval node: select knowledge base dropdown (from /api/knowledge-bases), top-k slider (1-20), similarity threshold slider (0.0-1.0)",
        "Validation errors shown inline: red border on invalid fields, error message below",
        "Required fields marked with asterisk",
        "All node config changes auto-save with debounce",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 50,
      "passes": false,
      "notes": "From PRD US-016"
    },
    {
      "id": "US-051",
      "title": "Edge connections with typed handles",
      "description": "As a user, I want to connect nodes with typed edges that represent data flow.",
      "acceptanceCriteria": [
        "Nodes have input handles on left side, output handles on right side",
        "Handle types: message (purple), text (blue), number (green), boolean (orange), json (yellow), any (gray)",
        "Each handle type has a distinct color",
        "Drag from output handle to input handle to create edge connection",
        "Bezier curve edge rendering with smooth routing",
        "Click edge to select it, Delete key or backspace to remove",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 51,
      "passes": false,
      "notes": "From PRD US-017 (part 1/2)"
    },
    {
      "id": "US-052",
      "title": "Edge type validation and animation",
      "description": "As a user, I want edges to validate type compatibility and animate during execution.",
      "acceptanceCriteria": [
        "Prevent connecting incompatible handle types (e.g. number output to message input) \u2014 show error tooltip on hover",
        "'any' type handles accept all connections",
        "Animated edge class for execution visualization (dashed line animation showing flow direction)",
        "Edge label on hover showing data preview placeholder",
        "Conditional nodes have labeled output handles: 'True' and 'False' (or named branches for Switch)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 52,
      "passes": false,
      "notes": "From PRD US-017 (part 2/2)"
    },
    {
      "id": "US-053",
      "title": "Workflow REST API and schema",
      "description": "As a developer, I need CRUD endpoints for workflow persistence.",
      "acceptanceCriteria": [
        "Migration: workflows table (id, name, description, version, nodes_json, edges_json, viewport_json, project_id, status, last_run_at, created_at, updated_at)",
        "GET /api/workflows with optional project_id filter",
        "POST /api/workflows creates workflow",
        "GET /api/workflows/:id returns full workflow with nodes/edges",
        "PUT /api/workflows/:id updates workflow (nodes, edges, metadata)",
        "DELETE /api/workflows/:id deletes workflow",
        "POST /api/workflows/:id/export returns workflow as downloadable JSON",
        "POST /api/workflows/import validates and creates workflow from JSON",
        "Typecheck passes"
      ],
      "priority": 53,
      "passes": false,
      "notes": "From PRD US-018"
    },
    {
      "id": "US-054",
      "title": "Workflow auto-save and manual save",
      "description": "As a user, I want my workflow to auto-save as I edit and support manual save.",
      "acceptanceCriteria": [
        "Auto-save: every canvas change (node add/move/delete, edge add/delete, config change) triggers PUT /api/workflows/:id after 2s debounce",
        "Save status indicator: 'Saved', 'Saving...', 'Unsaved changes'",
        "Manual save: Cmd+S shortcut triggers immediate save",
        "Save button in canvas toolbar",
        "Workflow metadata editable: name and description fields in a header area",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 54,
      "passes": false,
      "notes": "From PRD US-018"
    },
    {
      "id": "US-055",
      "title": "Workflow list, export, and import UI",
      "description": "As a user, I want to browse workflows and export/import them as JSON.",
      "acceptanceCriteria": [
        "Workflow list page at /workflows showing all workflows",
        "Each workflow card: name, status badge, node count, last run timestamp",
        "Export button on workflow detail downloads JSON file",
        "Import button on list page: file picker for JSON, validates schema, creates workflow",
        "Duplicate workflow action (creates copy with '(Copy)' suffix)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 55,
      "passes": false,
      "notes": "From PRD US-018"
    },
    {
      "id": "US-056",
      "title": "Relationships mode",
      "description": "As a user, I want to highlight connected nodes when tracing data flow in complex workflows.",
      "acceptanceCriteria": [
        "Shift+click a node activates relationships mode",
        "Connected nodes and edges highlighted at full opacity",
        "Unrelated nodes and edges fade to 20% opacity",
        "Upstream ancestor nodes shown with zen-blue tint",
        "Downstream descendant nodes shown with zen-green tint",
        "Selected node shown with coral accent border",
        "Click empty canvas to exit relationships mode",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 56,
      "passes": false,
      "notes": "From PRD US-019"
    },
    {
      "id": "US-057",
      "title": "Canvas real-time validation",
      "description": "As a user, I want the canvas to validate my workflow in real-time so I catch errors before running.",
      "acceptanceCriteria": [
        "Nodes with missing required configuration show yellow warning badge (top-right corner)",
        "Disconnected required inputs show red dot on the handle",
        "Cycle detection: if edges form a cycle, show error toast and highlight cycle edges in red",
        "Unreachable nodes (not connected to any trigger) shown with dashed border",
        "Validation summary panel (toggle button) listing all issues with click-to-navigate-to-node",
        "Validation runs on every canvas change (debounced 1s)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 57,
      "passes": false,
      "notes": "From PRD US-020"
    },
    {
      "id": "US-058",
      "title": "Chat WebSocket endpoint",
      "description": "As a developer, I need a WebSocket endpoint for streaming chat with agents.",
      "acceptanceCriteria": [
        "WebSocket endpoint at ws://api/playground/{agent_id}/chat",
        "Accepts JSON messages: {content: string, thread_id?: string}",
        "Streams response tokens as they arrive from the model provider",
        "Each streamed chunk: {type: 'token', content: string} or {type: 'done', usage: {...}}",
        "Error handling: {type: 'error', message: string}",
        "Typecheck passes"
      ],
      "priority": 58,
      "passes": false,
      "notes": "From PRD US-021"
    },
    {
      "id": "US-059",
      "title": "Chat playground interface",
      "description": "As a user, I want a conversational interface to test agents with streaming responses.",
      "acceptanceCriteria": [
        "Full-screen chat interface at /playground",
        "Agent selector dropdown at top (populated from /api/agents)",
        "Message input at bottom with send button",
        "Enter to submit, Shift+Enter for newline",
        "Streaming display: text appears token-by-token as received via WebSocket",
        "User messages right-aligned with bg-subtle, agent messages left-aligned",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 59,
      "passes": false,
      "notes": "From PRD US-021"
    },
    {
      "id": "US-060",
      "title": "Chat message features",
      "description": "As a user, I want markdown rendering and message actions in the chat.",
      "acceptanceCriteria": [
        "Markdown rendering in agent responses: code blocks with syntax highlighting, tables, lists, headings",
        "Copy message button appears on hover over any message",
        "Clear conversation button in chat header",
        "Auto-scroll to newest message, with scroll-to-bottom button if user scrolls up",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 60,
      "passes": false,
      "notes": "From PRD US-021"
    },
    {
      "id": "US-061",
      "title": "Conversation persistence",
      "description": "As a developer, I need chat conversations persisted so users can resume them.",
      "acceptanceCriteria": [
        "Migration: conversations table (id, agent_id, user_id, created_at, updated_at)",
        "Migration: messages table (id, conversation_id, role, content, tool_calls_json, usage_json, created_at)",
        "Messages saved to DB after each exchange",
        "Loading a conversation restores full message history in the chat UI",
        "Typecheck passes"
      ],
      "priority": 61,
      "passes": false,
      "notes": "From PRD US-021"
    },
    {
      "id": "US-062",
      "title": "Trace panel shell",
      "description": "As a user, I want a collapsible panel to inspect agent execution details.",
      "acceptanceCriteria": [
        "Collapsible right-side panel in playground",
        "Toggle with button or Cmd+I keyboard shortcut",
        "Panel slides in from right, does not cover chat messages (chat area shrinks)",
        "For each agent response, shows an expandable trace section",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 62,
      "passes": false,
      "notes": "From PRD US-022"
    },
    {
      "id": "US-063",
      "title": "Tool call and model call trace display",
      "description": "As a user, I want to see tool calls, model calls, and reasoning in the trace panel.",
      "acceptanceCriteria": [
        "Tool calls section: tool name, arguments as formatted JSON, result, duration in ms",
        "Model calls section: model used, prompt tokens, completion tokens, total tokens, latency in ms",
        "Reasoning content: if model returns chain-of-thought, show in collapsible section",
        "Finish reason indicator: stop, tool_calls, length, content_filter",
        "Error display: if tool or model call fails, show error message with stack trace",
        "Click any tool call to expand full input/output details",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 63,
      "passes": false,
      "notes": "From PRD US-022"
    },
    {
      "id": "US-064",
      "title": "Token usage and cost in trace",
      "description": "As a user, I want to see token usage and cost estimates for each message.",
      "acceptanceCriteria": [
        "Token usage summary per message: input tokens, output tokens, total",
        "Cumulative token usage for the entire conversation",
        "Cost estimate per message (based on model pricing from /api/costs/pricing)",
        "Cumulative cost for conversation",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 64,
      "passes": false,
      "notes": "From PRD US-022"
    },
    {
      "id": "US-065",
      "title": "Multi-model comparison",
      "description": "As a user, I want to compare responses from multiple models side-by-side.",
      "acceptanceCriteria": [
        "Compare mode toggle button in playground header",
        "When enabled: model selector allows picking 2-4 models",
        "User message sent to all selected models simultaneously via parallel WebSocket connections",
        "Responses displayed in columns side-by-side",
        "Per-model metrics: response time, token count, cost estimate",
        "Thumbs up/down rating button per response",
        "Export comparison results as JSON",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 65,
      "passes": false,
      "notes": "From PRD US-023"
    },
    {
      "id": "US-066",
      "title": "Voice input and text-to-speech",
      "description": "As a user, I want voice input for chat and text-to-speech for responses.",
      "acceptanceCriteria": [
        "Microphone button next to message input",
        "Uses Web Speech API (SpeechRecognition) for speech-to-text",
        "Live transcription displayed in input field as user speaks",
        "Auto-send on voice input completion (configurable in playground settings)",
        "Text-to-speech toggle for agent responses using SpeechSynthesis API",
        "Pulsing red dot visual indicator when recording",
        "Graceful fallback message if browser doesn't support Speech APIs",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 66,
      "passes": false,
      "notes": "From PRD US-024"
    },
    {
      "id": "US-067",
      "title": "Thread schema and REST API",
      "description": "As a developer, I need thread management endpoints for conversation organization.",
      "acceptanceCriteria": [
        "Migration: threads table (id, agent_id, user_id, first_message_preview, message_count, total_tokens, total_cost, created_at, updated_at)",
        "GET /api/threads with optional agent_id filter",
        "POST /api/threads creates new thread",
        "GET /api/threads/:id returns thread with messages",
        "DELETE /api/threads/:id deletes thread and its messages",
        "GET /api/threads/:id/messages returns paginated messages",
        "GET /api/threads/search?q=query for searching across threads",
        "Typecheck passes"
      ],
      "priority": 67,
      "passes": false,
      "notes": "From PRD US-025"
    },
    {
      "id": "US-068",
      "title": "Thread sidebar UI",
      "description": "As a user, I want to manage multiple conversation threads in the playground.",
      "acceptanceCriteria": [
        "Left sidebar in playground showing conversation threads (like a chat app list)",
        "Create new thread button at top",
        "Thread list items: first message preview, timestamp, message count",
        "Click thread to switch \u2014 loads its messages in the chat area",
        "Delete thread with confirmation dialog",
        "Thread metadata at top of chat: agent used, total tokens, total cost, duration",
        "Search input to search across all threads",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 68,
      "passes": false,
      "notes": "From PRD US-025"
    },
    {
      "id": "US-069",
      "title": "Workflow execution engine backend",
      "description": "As a developer, I need an execution engine that runs workflow DAGs in topological order.",
      "acceptanceCriteria": [
        "POST /api/workflows/:id/run starts execution, returns run_id",
        "Engine performs topological sort of nodes respecting edge dependencies",
        "Nodes execute in dependency order (parallel where no dependency exists)",
        "WebSocket endpoint ws://api/workflows/:id/runs/:runId/stream for execution events",
        "Events: {type: 'node_started', node_id}, {type: 'node_completed', node_id, output}, {type: 'node_failed', node_id, error}, {type: 'execution_completed', status}",
        "DELETE /api/workflows/:id/runs/:runId cancels running execution",
        "Typecheck passes"
      ],
      "priority": 69,
      "passes": false,
      "notes": "From PRD US-026"
    },
    {
      "id": "US-070",
      "title": "Workflow execution visualization",
      "description": "As a user, I want to see workflow execution progress on the canvas in real-time.",
      "acceptanceCriteria": [
        "Run button in canvas toolbar",
        "During execution: currently running node pulses with coral border animation",
        "Completed nodes show green checkmark overlay",
        "Failed nodes show red X overlay",
        "Edge animation (dashed line flow) between completed and running nodes",
        "Execution status bar at bottom: status (running/completed/failed), elapsed time, step count",
        "Cancel button to stop mid-execution",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 70,
      "passes": false,
      "notes": "From PRD US-026"
    },
    {
      "id": "US-071",
      "title": "Node inspection backend",
      "description": "As a developer, I need per-node execution data stored for inspection.",
      "acceptanceCriteria": [
        "Migration: node_executions table (id, run_id, node_id, input_json, output_json, logs_text, start_time, end_time, status, token_usage_json)",
        "Data captured for every node execution within a run",
        "GET /api/workflows/:id/runs/:runId/nodes/:nodeId returns execution data",
        "For LLM nodes: full prompt and response stored",
        "For Code nodes: stdout and stderr captured",
        "Typecheck passes"
      ],
      "priority": 71,
      "passes": false,
      "notes": "From PRD US-027"
    },
    {
      "id": "US-072",
      "title": "Node inspection UI",
      "description": "As a user, I want to click a node after execution to inspect its input, output, and timing.",
      "acceptanceCriteria": [
        "After execution, clicking a node opens inspection panel (same right panel as config, with execution tabs)",
        "Input tab: data received from upstream nodes as formatted JSON",
        "Output tab: data produced by this node as formatted JSON with copy button",
        "Logs tab: log messages emitted during execution",
        "Timing tab: start time, end time, duration, token usage (for LLM nodes)",
        "For LLM nodes: full prompt and response visible",
        "For Code nodes: stdout/stderr output displayed",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 72,
      "passes": false,
      "notes": "From PRD US-027"
    },
    {
      "id": "US-073",
      "title": "Step-through debug backend",
      "description": "As a developer, I need a debug execution mode that pauses before each node.",
      "acceptanceCriteria": [
        "POST /api/workflows/:id/debug starts debug mode execution",
        "Execution pauses before each node, waiting for WebSocket command",
        "WebSocket commands: {action: 'continue'}, {action: 'skip'}, {action: 'stop'}",
        "Variable state tracked per step and sent to client",
        "Breakpoint support: client sends {action: 'set_breakpoint', node_id} to pause at specific nodes",
        "Variables can be modified mid-flow: {action: 'set_variable', name, value}",
        "Typecheck passes"
      ],
      "priority": 73,
      "passes": false,
      "notes": "From PRD US-028"
    },
    {
      "id": "US-074",
      "title": "Step-through debug UI",
      "description": "As a user, I want to step through workflow execution one node at a time.",
      "acceptanceCriteria": [
        "Debug button (next to Run) in canvas toolbar",
        "When paused: Continue / Skip / Stop control bar appears above status bar",
        "Currently paused node highlighted with distinct border style",
        "Variable inspect panel at bottom showing current variables and values",
        "Variables editable: click value to edit, modified value used by downstream nodes",
        "Breakpoint: click node border/badge to toggle breakpoint (red dot indicator)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 74,
      "passes": false,
      "notes": "From PRD US-028"
    },
    {
      "id": "US-075",
      "title": "Single-node execution",
      "description": "As a user, I want to test a single node in isolation with mock inputs.",
      "acceptanceCriteria": [
        "Right-click node context menu with 'Run This Node' option",
        "Mock input panel: editable JSON representing the input this node would receive",
        "Executes the single node with provided input",
        "Shows output in the inspection panel",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 75,
      "passes": false,
      "notes": "From PRD US-028"
    },
    {
      "id": "US-076",
      "title": "Variable inspect panel",
      "description": "As a user, I want a panel showing all workflow variables and their current values.",
      "acceptanceCriteria": [
        "Bottom-of-canvas collapsible panel (toggle with Cmd+J)",
        "Table view: variable name, current value, type, source node",
        "Variables update in real-time during execution via WebSocket",
        "Click variable to highlight the node that produced it on canvas",
        "Filter variables by node or by type",
        "Edit variable values during debug mode",
        "Copy variable value to clipboard button",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 76,
      "passes": false,
      "notes": "From PRD US-029"
    },
    {
      "id": "US-077",
      "title": "Run history schema and REST API",
      "description": "As a developer, I need run history persisted for replay and analysis.",
      "acceptanceCriteria": [
        "Migration: workflow_runs table (id, workflow_id, status, trigger_type, input_json, start_time, end_time, step_count, total_tokens, total_cost)",
        "GET /api/workflows/:id/runs returns paginated run history",
        "GET /api/workflows/:id/runs/:runId returns full run detail with node_executions",
        "Filter support: status, date range, trigger type",
        "Typecheck passes"
      ],
      "priority": 77,
      "passes": false,
      "notes": "From PRD US-030"
    },
    {
      "id": "US-078",
      "title": "Run history UI and replay",
      "description": "As a user, I want to view past executions and replay them.",
      "acceptanceCriteria": [
        "Execution history panel (sidebar or separate page) showing past runs",
        "Each run: status badge, timestamp, duration, trigger info",
        "Click run to load its state on canvas (nodes colored by execution result)",
        "Replay button: re-run with same inputs",
        "Replay with modifications: edit inputs in a form before replaying",
        "Filter by status, date range, trigger type",
        "Run comparison: select two runs to diff their inputs and outputs side-by-side",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 78,
      "passes": false,
      "notes": "From PRD US-030"
    },
    {
      "id": "US-079",
      "title": "Tool schema and REST API",
      "description": "As a developer, I need a schema and endpoints for tool management.",
      "acceptanceCriteria": [
        "Migration: tools table (id, name, description, category, schema_json, code, tool_type, usage_count, project_id, created_at)",
        "category enum: search, code, file, data, communication, custom",
        "tool_type enum: function, http, schema, mcp",
        "GET /api/tools with category filter support",
        "GET /api/tools/:id returns full tool detail with schema",
        "Typecheck passes"
      ],
      "priority": 79,
      "passes": false,
      "notes": "From PRD US-031"
    },
    {
      "id": "US-080",
      "title": "Tools page UI",
      "description": "As a user, I want to browse available tools and assign them to agents.",
      "acceptanceCriteria": [
        "Tools page at /tools with grid/list view toggle",
        "Tool card: name, description, category icon, parameter count, usage count badge",
        "Search bar and category filter dropdown",
        "Tool detail page: full description, JSON schema viewer, parameter descriptions, example usage",
        "'Add to Agent' action opens agent selector modal",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 80,
      "passes": false,
      "notes": "From PRD US-031"
    },
    {
      "id": "US-081",
      "title": "Custom tool creation backend",
      "description": "As a developer, I need endpoints for creating and testing custom Python tools.",
      "acceptanceCriteria": [
        "POST /api/tools/custom creates tool from Python code",
        "PUT /api/tools/custom/:id updates tool code",
        "POST /api/tools/custom/:id/test executes tool with sample inputs in sandbox",
        "Auto-detect parameters from function signature using AST parsing",
        "Generate JSON schema from function signature and docstring",
        "Returns test output or error with traceback",
        "Typecheck passes"
      ],
      "priority": 81,
      "passes": false,
      "notes": "From PRD US-032"
    },
    {
      "id": "US-082",
      "title": "Custom tool creation UI",
      "description": "As a user, I want to create custom tools by writing Python in the browser.",
      "acceptanceCriteria": [
        "Create Tool page at /tools/new",
        "Code editor with Python syntax highlighting (CodeMirror or monospace textarea)",
        "Pre-filled template: from orbiter.tool import tool; @tool decorator pattern",
        "Parameter table auto-populated from function signature",
        "JSON schema preview panel showing generated schema",
        "Test Tool button with sample input fields",
        "Test result panel showing output or error traceback",
        "Save button to add tool to library",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 82,
      "passes": false,
      "notes": "From PRD US-032"
    },
    {
      "id": "US-083",
      "title": "Visual tool schema editor",
      "description": "As a user, I want to define tools by building their schema visually without code.",
      "acceptanceCriteria": [
        "Schema editor form: tool name, description",
        "Parameters list: add/remove parameters",
        "Per parameter: name input, type selector (string/number/boolean/object/array), description, required toggle, default value",
        "Nested object support: expandable sub-parameter forms for object types",
        "Enum support for string parameters: comma-separated allowed values",
        "Live JSON schema preview panel",
        "For HTTP tools: method dropdown, URL template, header key-value pairs, body template",
        "OpenAPI import: paste URL or JSON to auto-generate tool definitions",
        "POST /api/tools/schema to save",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 83,
      "passes": false,
      "notes": "From PRD US-033"
    },
    {
      "id": "US-084",
      "title": "Tool Mode toggle on workflow nodes",
      "description": "As a user, I want to expose any workflow node as a tool that agents can call.",
      "acceptanceCriteria": [
        "Tool Mode toggle switch rendered on every workflow node",
        "When enabled, node appears in the tool library as an available tool",
        "Tool name derived from node name, schema from node inputs/outputs",
        "Tool Mode nodes show a wrench icon badge on the canvas",
        "Agents using this tool trigger the node's logic during execution",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 84,
      "passes": false,
      "notes": "From PRD US-034"
    },
    {
      "id": "US-085",
      "title": "Plugin manifest and isolation backend",
      "description": "As a developer, I need plugin infrastructure for community extensions.",
      "acceptanceCriteria": [
        "Plugin manifest format: plugin.json with name, version, type (model/tool/strategy/extension), permissions, entry_point",
        "Plugin isolation: each plugin runs in its own subprocess with defined permissions",
        "POST /api/plugins/install installs from plugin package",
        "DELETE /api/plugins/:id uninstalls plugin",
        "Migration: plugins table (id, name, version, type, manifest_json, status, installed_at)",
        "Load from directory support for local plugin development",
        "Typecheck passes"
      ],
      "priority": 85,
      "passes": false,
      "notes": "From PRD US-035"
    },
    {
      "id": "US-086",
      "title": "Plugin marketplace UI",
      "description": "As a user, I want to browse and install community plugins from a marketplace.",
      "acceptanceCriteria": [
        "Plugins page at /plugins with marketplace grid view",
        "Plugin card: name, author, description, install count, rating, category badge",
        "Categories: Models, Tools, Agent Strategies, Extensions, Bundles",
        "Plugin detail page: full description, screenshots placeholder, changelog, permissions required",
        "One-click Install button",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 86,
      "passes": false,
      "notes": "From PRD US-035"
    },
    {
      "id": "US-087",
      "title": "Plugin management",
      "description": "As a user, I want to manage installed plugins with enable/disable controls.",
      "acceptanceCriteria": [
        "Installed plugins tab showing currently installed plugins",
        "Enable/disable toggle per plugin",
        "Plugin status: active (green), disabled (gray), error (red)",
        "Load from Directory button for local plugin development",
        "Uninstall button with confirmation",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 87,
      "passes": false,
      "notes": "From PRD US-035"
    },
    {
      "id": "US-088",
      "title": "Agent hierarchy graph view",
      "description": "As a user, I want to visualize how agents relate to each other in a graph.",
      "acceptanceCriteria": [
        "Agent graph page using Xyflow showing all agents as nodes",
        "Agent nodes display: name, model, tool count, status indicator",
        "Handoff connections as solid directed edges with 'handoff' label",
        "Delegation connections as dashed directed edges with 'delegates to' label",
        "Click agent node to navigate to agent detail/config",
        "Auto-layout: hierarchical top-to-bottom for supervisor patterns",
        "Drag to rearrange agent positions",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 88,
      "passes": false,
      "notes": "From PRD US-036"
    },
    {
      "id": "US-089",
      "title": "Supervisor pattern backend",
      "description": "As a developer, I need backend logic for supervisor/sub-agent delegation.",
      "acceptanceCriteria": [
        "Migration: agent_relationships table (id, supervisor_id, sub_agent_id, relationship_type, routing_rule_json)",
        "Sub-agents automatically wrapped as tools on the supervisor agent",
        "Supervisor's system prompt auto-includes descriptions of available sub-agents",
        "POST /api/agents/:id/sub-agents to add sub-agent",
        "DELETE /api/agents/:id/sub-agents/:subId to remove",
        "Optional routing rules: JSON conditions for when to delegate",
        "Typecheck passes"
      ],
      "priority": 89,
      "passes": false,
      "notes": "From PRD US-037"
    },
    {
      "id": "US-090",
      "title": "Supervisor wizard UI",
      "description": "As a user, I want a wizard to create supervisor agents with sub-agent delegation.",
      "acceptanceCriteria": [
        "Create Supervisor wizard at /agents/new/supervisor",
        "Step 1: Select or create primary supervisor agent",
        "Step 2: Select sub-agents to delegate to from existing agents list",
        "Visual preview: supervisor node at top with connection lines to sub-agents",
        "Add/remove sub-agents from the wizard",
        "Optional routing rules configuration per sub-agent",
        "Test in playground: live delegation trace shows which sub-agent was called",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 90,
      "passes": false,
      "notes": "From PRD US-037"
    },
    {
      "id": "US-091",
      "title": "Crew schema and REST API",
      "description": "As a developer, I need schema and endpoints for crew-based agent orchestration.",
      "acceptanceCriteria": [
        "Migration: crews table (id, name, description, process_type, config_json, project_id, created_at)",
        "Migration: crew_tasks table (id, crew_id, agent_id, task_description, expected_output, task_order, dependencies_json)",
        "process_type enum: sequential, parallel",
        "GET/POST /api/crews, GET/PUT/DELETE /api/crews/:id",
        "POST /api/crews/:id/run executes the crew",
        "Typecheck passes"
      ],
      "priority": 91,
      "passes": false,
      "notes": "From PRD US-038"
    },
    {
      "id": "US-092",
      "title": "Crew builder UI",
      "description": "As a user, I want to organize agents into crews with defined tasks.",
      "acceptanceCriteria": [
        "Create Crew page at /crews/new: crew name, description, process type selector (sequential/parallel)",
        "Agent assignment: add existing agents to crew from selector",
        "Per-agent task definition: what to accomplish (text), expected output format (text), dependencies on other tasks",
        "Sequential: drag to reorder task execution order",
        "Delegation toggle: allow agents to create sub-tasks for other crew members",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 92,
      "passes": false,
      "notes": "From PRD US-038"
    },
    {
      "id": "US-093",
      "title": "Crew execution view",
      "description": "As a user, I want to see crew execution progress with a timeline per agent.",
      "acceptanceCriteria": [
        "Crew execution triggered from crew detail page",
        "Sequential mode: tasks execute in order, output of one feeds into next",
        "Parallel mode: independent tasks run simultaneously",
        "Timeline view: horizontal timeline showing task progress per agent",
        "Each task: status (pending/running/completed/failed), duration, agent name",
        "Live updates via WebSocket",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 93,
      "passes": false,
      "notes": "From PRD US-038"
    },
    {
      "id": "US-094",
      "title": "Planner/Executor/Verifier backend",
      "description": "As a developer, I need autonomous task decomposition with plan/execute/verify cycle.",
      "acceptanceCriteria": [
        "Autonomous Mode toggle on agent config (boolean field)",
        "When enabled, system auto-creates a Planner prompt that: receives user goal, generates numbered plan with steps/descriptions/dependencies, assigns to executor agents",
        "Verifier step: after each execution, checks output against acceptance criteria",
        "One action per iteration: awaits result before next step",
        "Plan versioning: when plan changes mid-execution, previous version stored",
        "Typecheck passes"
      ],
      "priority": 94,
      "passes": false,
      "notes": "From PRD US-039"
    },
    {
      "id": "US-095",
      "title": "Autonomous mode UI",
      "description": "As a user, I want to see and modify the AI-generated plan during execution.",
      "acceptanceCriteria": [
        "Plan display panel: numbered step list with status icons (pending/running/completed/failed)",
        "User can modify plan mid-execution: add, remove, reorder steps",
        "Verification results shown per step: pass/fail with explanation",
        "Plan history: view previous plan versions",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 95,
      "passes": false,
      "notes": "From PRD US-039"
    },
    {
      "id": "US-096",
      "title": "Workflow-embedded agent nodes",
      "description": "As a user, I want agent nodes in workflows that wrap full Orbiter agents.",
      "acceptanceCriteria": [
        "Agent node type on workflow canvas wrapping a full Orbiter Agent",
        "Agent node config: select existing agent from dropdown, or configure inline (name, model, tools, instructions)",
        "Agent node input: accepts messages/text from upstream nodes",
        "Agent node output: produces response text and metadata (tool calls, token usage)",
        "Agent nodes support full tool loop (multiple LLM-tool round-trips within single node)",
        "Streaming output from agent nodes visible in execution trace",
        "Nested agents: agent node's tools can include other agent nodes (supervisor pattern on canvas)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 96,
      "passes": false,
      "notes": "From PRD US-040"
    },
    {
      "id": "US-097",
      "title": "Knowledge base schema and REST API",
      "description": "As a developer, I need schema and endpoints for knowledge base management.",
      "acceptanceCriteria": [
        "Migration: knowledge_bases table (id, name, description, embedding_model, chunk_size, chunk_overlap, doc_count, chunk_count, project_id, created_at)",
        "GET /api/knowledge-bases with project_id filter",
        "POST /api/knowledge-bases creates KB",
        "GET /api/knowledge-bases/:id returns KB with stats",
        "PUT /api/knowledge-bases/:id updates KB config",
        "DELETE /api/knowledge-bases/:id deletes KB and all documents",
        "Typecheck passes"
      ],
      "priority": 97,
      "passes": false,
      "notes": "From PRD US-041"
    },
    {
      "id": "US-098",
      "title": "Knowledge base management UI",
      "description": "As a user, I want to create and manage knowledge bases for RAG.",
      "acceptanceCriteria": [
        "Knowledge Base page at /knowledge with list of KBs",
        "Create KB form: name, description, embedding model selector, chunk size (number), chunk overlap (number)",
        "KB detail page showing: document list, stats (total docs, total chunks, index size)",
        "Delete KB with confirmation dialog",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 98,
      "passes": false,
      "notes": "From PRD US-041"
    },
    {
      "id": "US-099",
      "title": "Document processing backend",
      "description": "As a developer, I need document ingestion with chunking and embedding support.",
      "acceptanceCriteria": [
        "Migration: documents table (id, kb_id, filename, file_type, chunk_count, metadata_json, status, created_at)",
        "POST /api/knowledge-bases/:id/documents accepts file upload",
        "Supported formats: PDF, DOCX, TXT, MD, CSV, HTML (PPTX optional/later)",
        "Document processing pipeline: extract text -> chunk by size/overlap -> store chunks",
        "GET /api/knowledge-bases/:id/documents returns document list",
        "DELETE /api/knowledge-bases/:id/documents/:docId removes document and its chunks",
        "Typecheck passes"
      ],
      "priority": 99,
      "passes": false,
      "notes": "From PRD US-042"
    },
    {
      "id": "US-100",
      "title": "Document upload UI",
      "description": "As a user, I want to upload documents to a knowledge base with progress tracking.",
      "acceptanceCriteria": [
        "Upload UI: drag-and-drop zone with visual feedback + file picker button",
        "Upload progress bar per file: uploading -> processing -> chunking -> complete",
        "Chunking preview: show first 2-3 chunks after processing",
        "Per-document settings: custom chunk size override, metadata tags input",
        "Bulk upload: multiple files at once",
        "Document list: filename, type icon, chunk count, upload date, status badge",
        "Delete document button",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 100,
      "passes": false,
      "notes": "From PRD US-042"
    },
    {
      "id": "US-101",
      "title": "Knowledge retrieval backend",
      "description": "As a developer, I need retrieval configuration and search endpoints.",
      "acceptanceCriteria": [
        "Retrieval settings stored per KB: search_type (semantic/keyword/hybrid), top_k (1-20), similarity_threshold (0.0-1.0), reranker_enabled",
        "POST /api/knowledge-bases/:id/search accepts {query: string} and returns ranked chunks with scores",
        "Retrieval node integration: workflow node can query KB",
        "Agent-level KB assignment: agents can have knowledge_base_ids in config",
        "Typecheck passes"
      ],
      "priority": 101,
      "passes": false,
      "notes": "From PRD US-043"
    },
    {
      "id": "US-102",
      "title": "Knowledge retrieval config UI",
      "description": "As a user, I want to configure and test knowledge retrieval.",
      "acceptanceCriteria": [
        "Retrieval settings section on KB detail page: search type toggle (semantic/keyword/hybrid), top-k slider (1-20), similarity threshold slider (0.0-1.0)",
        "Reranking toggle with reranker model selection",
        "Test retrieval: query input, submit button, results showing chunks with relevance scores",
        "Click chunk to see full text with source document name highlighted",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 102,
      "passes": false,
      "notes": "From PRD US-043"
    },
    {
      "id": "US-103",
      "title": "Vector store configuration",
      "description": "As a user, I want to configure which vector store backend is used for embeddings.",
      "acceptanceCriteria": [
        "Settings > Knowledge > Vector Store section",
        "Backend selector: SQLite-VSS (default), Milvus/Zilliz, Qdrant, ChromaDB, Pinecone",
        "Per-backend connection config: host, port, API key, collection name",
        "Test Connection button showing success/error",
        "Status indicator: connected backend name and index health",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 103,
      "passes": false,
      "notes": "From PRD US-044"
    },
    {
      "id": "US-104",
      "title": "Context configuration panel",
      "description": "As a user, I want to configure Orbiter's Context engine for agents through the UI.",
      "acceptanceCriteria": [
        "Context tab added to agent builder form",
        "Automation level selector: Pilot (fully autonomous), Copilot (suggests, user approves), Navigator (plans only)",
        "Token budget inputs: max tokens per step, max total tokens",
        "Memory toggle with type selector: conversation, summary, sliding_window",
        "Workspace toggle: enable artifact storage for the agent",
        "Settings map directly to Orbiter's ContextConfig class fields",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 104,
      "passes": false,
      "notes": "From PRD US-045"
    },
    {
      "id": "US-105",
      "title": "Neuron pipeline editor",
      "description": "As a user, I want to visually configure the neuron pipeline that builds prompts.",
      "acceptanceCriteria": [
        "Neuron pipeline editor on agent builder Context tab",
        "Ordered list of neurons composing the final prompt",
        "Available neuron types: System Instruction, Context State, Tool Results, Conversation History, Knowledge Retrieval, Custom Template",
        "Drag handle to reorder neurons in the pipeline",
        "Per-neuron config: template text, max tokens allocation, priority number",
        "Preview panel showing assembled prompt from neuron pipeline",
        "Token budget bar chart showing tokens consumed per neuron",
        "Save/load neuron pipeline configurations",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 105,
      "passes": false,
      "notes": "From PRD US-046"
    },
    {
      "id": "US-106",
      "title": "Context state inspector",
      "description": "As a user, I want to inspect hierarchical context state during agent execution.",
      "acceptanceCriteria": [
        "Context inspector panel accessible from playground trace and run monitoring",
        "Tree view of context state matching Orbiter's ContextState parent-child hierarchy",
        "Each state node shows: task_id, key-value pairs, token usage",
        "Expand/collapse state nodes",
        "Change highlighting between steps: new/modified values in green, removed in red",
        "Fork visualization: when context is forked, show branch in tree",
        "Merge visualization: show merge events with net token delta",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 106,
      "passes": false,
      "notes": "From PRD US-047"
    },
    {
      "id": "US-107",
      "title": "Checkpoint backend and REST API",
      "description": "As a developer, I need checkpoint save/restore for long-running agent tasks.",
      "acceptanceCriteria": [
        "Migration: checkpoints table (id, run_id, name, step_number, state_blob, created_at)",
        "POST /api/runs/:runId/checkpoints saves current execution state",
        "GET /api/runs/:runId/checkpoints lists checkpoints for a run",
        "POST /api/runs/:runId/checkpoints/:cpId/restore resumes from checkpoint",
        "Auto-checkpoint at configurable interval (every N steps, stored in run config)",
        "Retention policy: delete checkpoints older than N days (configurable)",
        "Typecheck passes"
      ],
      "priority": 107,
      "passes": false,
      "notes": "From PRD US-048"
    },
    {
      "id": "US-108",
      "title": "Checkpoint management UI",
      "description": "As a user, I want to save and restore checkpoints during agent execution.",
      "acceptanceCriteria": [
        "Checkpoint list on run detail page: name, timestamp, state size, step number",
        "Save Checkpoint button during active execution",
        "Restore Checkpoint button that resumes execution from that point",
        "Checkpoint diff: select two checkpoints to compare state changes",
        "Delete old checkpoints button",
        "Auto-checkpoint interval setting in run config",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 108,
      "passes": false,
      "notes": "From PRD US-048"
    },
    {
      "id": "US-109",
      "title": "Metrics aggregation backend",
      "description": "As a developer, I need aggregate metrics endpoints for the monitoring dashboard.",
      "acceptanceCriteria": [
        "GET /api/metrics/dashboard?range=24h returns: total_runs, success_rate, avg_latency_ms, total_tokens, total_cost",
        "GET /api/metrics/agents returns per-agent breakdown: agent_name, run_count, success_rate, avg_tokens, avg_cost",
        "GET /api/metrics/timeseries?range=7d&metric=runs returns time-bucketed data for charts",
        "Time ranges: 1h, 24h, 7d, 30d, custom (start/end timestamps)",
        "Leverages orbiter-observability metrics where available",
        "Typecheck passes"
      ],
      "priority": 109,
      "passes": false,
      "notes": "From PRD US-049"
    },
    {
      "id": "US-110",
      "title": "Monitoring dashboard UI",
      "description": "As a user, I want a dashboard showing aggregate metrics for all agent runs.",
      "acceptanceCriteria": [
        "Dashboard page at /monitoring with time-range selector (1h, 24h, 7d, 30d, custom)",
        "Key metric cards: total runs, success rate %, avg latency, total tokens, total cost",
        "Charts (vanilla JS + SVG, no chart library): runs over time (bar), tokens over time (line), cost over time (line), latency distribution (histogram), success/failure ratio (donut)",
        "Per-agent breakdown table: agent name, run count, success rate, avg tokens, avg cost",
        "Click agent name to drill into agent-specific metrics",
        "Auto-refresh toggle (every 30s)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 110,
      "passes": false,
      "notes": "From PRD US-049"
    },
    {
      "id": "US-111",
      "title": "Runs schema and REST API",
      "description": "As a developer, I need a comprehensive runs schema and endpoints for execution tracking.",
      "acceptanceCriteria": [
        "Migration: runs table (id, agent_id, workflow_id, status, steps_json, total_tokens, total_cost, start_time, end_time, finish_reason, created_at)",
        "GET /api/runs with filters: agent_id, status, date range, min_cost",
        "GET /api/runs/:id returns full run detail with steps",
        "WebSocket ws://api/runs/:id/stream for live execution updates",
        "Typecheck passes"
      ],
      "priority": 111,
      "passes": false,
      "notes": "From PRD US-050"
    },
    {
      "id": "US-112",
      "title": "Runs list and detail UI",
      "description": "As a user, I want to view live execution traces with per-step detail.",
      "acceptanceCriteria": [
        "Runs page at /monitoring/runs showing all runs sortable by status/time/agent/cost",
        "Run detail view with timeline: each step as a row showing step number, type (LLM/tool/handoff), duration, tokens",
        "Expandable step: full input, output, error if any",
        "Tool calls within a step shown as nested sub-rows",
        "Live streaming for in-progress runs (new steps appear automatically)",
        "Run summary header: total steps, tokens, cost, duration, finish reason",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 112,
      "passes": false,
      "notes": "From PRD US-050"
    },
    {
      "id": "US-113",
      "title": "Cost estimation backend",
      "description": "As a developer, I need cost calculation with pricing config and budget alerts.",
      "acceptanceCriteria": [
        "Migration: model_pricing table (id, model_name, input_price_per_1k, output_price_per_1k)",
        "Pre-seeded pricing for: gpt-4o, gpt-4o-mini, claude-3.5-sonnet, claude-3-haiku, gemini-1.5-pro, gemini-1.5-flash",
        "GET /api/costs/summary returns aggregate cost data",
        "GET/PUT /api/costs/pricing for managing model pricing",
        "Migration: cost_budgets table (id, scope, scope_id, budget_amount, period, alert_threshold)",
        "GET/PUT /api/costs/budgets for budget management",
        "Budget check on every run: warn at threshold %, can pause at 100%",
        "Typecheck passes"
      ],
      "priority": 113,
      "passes": false,
      "notes": "From PRD US-051"
    },
    {
      "id": "US-114",
      "title": "Cost tracking UI",
      "description": "As a user, I want to see costs everywhere and configure budget alerts.",
      "acceptanceCriteria": [
        "Cost displayed: per message in playground, per step in traces, per run in history, per agent in dashboard",
        "Model pricing configuration page: table of models with editable input/output prices",
        "Cost budget setup: monthly or daily budget per agent or workspace",
        "Alert threshold slider (default 80%)",
        "Cost breakdown chart: by agent, by model, by time period",
        "Warning banner when approaching budget limit",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 114,
      "passes": false,
      "notes": "From PRD US-051"
    },
    {
      "id": "US-115",
      "title": "Structured logging backend",
      "description": "As a developer, I need structured log storage with streaming and filtering.",
      "acceptanceCriteria": [
        "Migration: logs table (id, timestamp, level, source, agent_id, message, metadata_json)",
        "level enum: debug, info, warn, error",
        "source enum: agent, tool, model, system",
        "GET /api/logs with query params: level, source, agent_id, start_time, end_time, search",
        "WebSocket ws://api/logs/stream for live log streaming",
        "Leverages orbiter-observability structured logging",
        "Typecheck passes"
      ],
      "priority": 115,
      "passes": false,
      "notes": "From PRD US-052"
    },
    {
      "id": "US-116",
      "title": "Log viewer UI",
      "description": "As a user, I want to view and filter structured logs from agent executions.",
      "acceptanceCriteria": [
        "Logs page at /monitoring/logs with streaming log viewer (newest at top)",
        "Log entry: timestamp, level badge, source badge, message text",
        "Expandable structured metadata per entry (formatted JSON key-value pairs)",
        "Filter bar: level dropdown, source dropdown, agent selector, time range picker, search text input",
        "Severity color coding: debug=gray, info=zen-blue, warn=yellow, error=red",
        "Auto-scroll toggle for live streaming",
        "Export buttons: JSON and CSV download",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 116,
      "passes": false,
      "notes": "From PRD US-052"
    },
    {
      "id": "US-117",
      "title": "Alert rules backend",
      "description": "As a developer, I need alert rules, health checks, and SLO tracking.",
      "acceptanceCriteria": [
        "Migration: alert_rules table (id, condition_json, action_type, action_config_json, enabled)",
        "Migration: alerts table (id, rule_id, severity, agent_id, message, acknowledged, created_at)",
        "Condition types: error_rate > X%, latency > Yms, cost > $Z",
        "Action types: toast, email, webhook",
        "GET/POST /api/alerts/rules, GET /api/alerts",
        "GET /api/health returns per-agent and per-provider health",
        "Leverages orbiter-observability alerting and health checks",
        "Typecheck passes"
      ],
      "priority": 117,
      "passes": false,
      "notes": "From PRD US-053"
    },
    {
      "id": "US-118",
      "title": "Alert management UI",
      "description": "As a user, I want to configure alerts and view health status.",
      "acceptanceCriteria": [
        "Alert rules page: create/edit rules with condition builder and action selector",
        "Triggered alerts list: severity badge, timestamp, affected agent, message",
        "Acknowledge button on alerts, assign to team member",
        "Health status page: per-agent health (last run status, avg success rate, last error)",
        "Provider health: API key status indicator, latency per provider, rate limit status",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 118,
      "passes": false,
      "notes": "From PRD US-053"
    },
    {
      "id": "US-119",
      "title": "Approval gate backend",
      "description": "As a developer, I need approval gate node logic that pauses workflow execution.",
      "acceptanceCriteria": [
        "Approval Gate registered as a node type in the workflow system",
        "When execution reaches this node, run status changes to 'awaiting_approval'",
        "Notification created for the user",
        "Timeout: auto-reject after configurable minutes/hours",
        "GET /api/approvals/pending returns pending approvals for current user",
        "POST /api/approvals/:id/respond accepts {approved: boolean, comment?: string}",
        "On approval, execution resumes; on rejection, execution fails with comment",
        "Typecheck passes"
      ],
      "priority": 119,
      "passes": false,
      "notes": "From PRD US-054"
    },
    {
      "id": "US-120",
      "title": "Approval gate UI",
      "description": "As a user, I want approval gates in workflows with a clear approval interface.",
      "acceptanceCriteria": [
        "Approval Gate node type available in the workflow node sidebar",
        "Approval modal: shows pending action, context from previous nodes, Approve/Reject buttons",
        "Optional comment field with rejection (required for reject, optional for approve)",
        "Approval history log on the node inspection panel",
        "In-app notification badge when approvals are pending",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 120,
      "passes": false,
      "notes": "From PRD US-054"
    },
    {
      "id": "US-121",
      "title": "Real-time agent takeover",
      "description": "As a user, I want to take over agent execution in real-time during a conversation.",
      "acceptanceCriteria": [
        "During live agent execution in playground, 'Take Over' button appears",
        "Clicking pauses the agent's autonomous loop",
        "User can: inject a message (text input), resume agent, or stop execution",
        "Resume returns control to agent with injected message as context",
        "Stop terminates immediately, partial results saved",
        "Takeover events logged in execution trace",
        "Agent status badge changes: 'Running' -> 'Paused (Human Control)' -> 'Running'",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 121,
      "passes": false,
      "notes": "From PRD US-055"
    },
    {
      "id": "US-122",
      "title": "Annotation schema and REST API",
      "description": "As a developer, I need annotation storage and similarity matching for cached responses.",
      "acceptanceCriteria": [
        "Migration: annotations table (id, query, original_response, improved_response, similarity_threshold, usage_count, cost_saved, created_at)",
        "GET /api/annotations with search support",
        "POST /api/annotations creates annotation",
        "PUT/DELETE /api/annotations/:id",
        "POST /api/annotations/import accepts CSV with query,response columns",
        "Annotation matching: when incoming query is semantically similar (above threshold), serve improved_response instead of LLM call",
        "Typecheck passes"
      ],
      "priority": 122,
      "passes": false,
      "notes": "From PRD US-056"
    },
    {
      "id": "US-123",
      "title": "Annotation UI",
      "description": "As a user, I want to annotate agent responses and see cost savings.",
      "acceptanceCriteria": [
        "Thumbs up/down buttons on every agent response in playground and logs",
        "Annotate button opens editor for writing improved response",
        "Annotation management page at /annotations: list all, search, edit, delete",
        "Bulk import: upload CSV for Q&A pair annotations",
        "Match threshold slider setting (similarity score 0.0-1.0)",
        "Cost savings display: total saved vs LLM calls",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 123,
      "passes": false,
      "notes": "From PRD US-056"
    },
    {
      "id": "US-124",
      "title": "Message editing and replay",
      "description": "As a user, I want to edit messages in conversations and replay from an edit point.",
      "acceptanceCriteria": [
        "Hover menu on each message: edit, delete, copy, replay from here",
        "Edit opens inline editor with original message text",
        "Replay from here: re-runs conversation from edited message onward",
        "Delete removes message and re-indexes subsequent messages",
        "Edit history tracked: show original vs edited on hover",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 124,
      "passes": false,
      "notes": "From PRD US-057"
    },
    {
      "id": "US-125",
      "title": "Code interpreter sandbox backend",
      "description": "As a developer, I need a sandboxed Python execution environment for agents.",
      "acceptanceCriteria": [
        "Code interpreter tool registered in tool system",
        "Executes Python in isolated subprocess with restrictions: no network, limited filesystem (workspace only), memory limit, CPU timeout",
        "Common libraries available: pandas, numpy, matplotlib, json, csv",
        "Captures: stdout, stderr, generated files (images, CSVs)",
        "POST /api/sandbox/execute for testing: accepts code string, returns output",
        "Sandbox lifecycle: created per-run, destroyed after run completes",
        "Configuration: allowed_libraries list, timeout_seconds, memory_limit_mb",
        "Typecheck passes"
      ],
      "priority": 125,
      "passes": false,
      "notes": "From PRD US-058"
    },
    {
      "id": "US-126",
      "title": "Sandbox config and file display UI",
      "description": "As a user, I want code interpreter results displayed inline and configurable.",
      "acceptanceCriteria": [
        "Code Interpreter appears as assignable tool in agent builder Tools tab",
        "Generated images rendered inline in chat messages",
        "Generated files shown as downloadable links in chat",
        "Sandbox configuration section: allowed libraries checklist, timeout slider, memory limit input",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 126,
      "passes": false,
      "notes": "From PRD US-058"
    },
    {
      "id": "US-127",
      "title": "Live sandbox view",
      "description": "As a user, I want to watch the agent working in its sandbox in real-time.",
      "acceptanceCriteria": [
        "Sandbox View tab in run detail page",
        "File tree panel: real-time display of files being created/modified in workspace",
        "Terminal panel: shows command history and output as log stream",
        "Click file in tree to preview contents",
        "Artifact collection: all files generated during run listed with download links",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 127,
      "passes": false,
      "notes": "From PRD US-059"
    },
    {
      "id": "US-128",
      "title": "Artifact schema and REST API",
      "description": "As a developer, I need artifact storage and retrieval endpoints.",
      "acceptanceCriteria": [
        "Migration: artifacts table (id, run_id, agent_id, filename, file_type, file_size, storage_path, created_at)",
        "GET /api/artifacts with filters: file_type, agent_id, date range, run_id",
        "GET /api/artifacts/:id returns artifact metadata",
        "GET /api/artifacts/:id/download returns file content",
        "DELETE /api/artifacts/:id removes artifact and file",
        "File storage in configurable directory (default: data/artifacts/)",
        "Typecheck passes"
      ],
      "priority": 128,
      "passes": false,
      "notes": "From PRD US-060"
    },
    {
      "id": "US-129",
      "title": "Artifacts page UI",
      "description": "As a user, I want a centralized library of all agent-generated files.",
      "acceptanceCriteria": [
        "Artifacts page at /artifacts with grid/list view toggle",
        "File preview: images rendered inline, text files with syntax highlighting, PDFs embedded viewer",
        "Filter by: file type dropdown, agent selector, date range, run ID",
        "Download button per artifact, bulk download as ZIP button",
        "Artifact metadata: source agent, source run (linked), timestamp, file size",
        "Delete with confirmation",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 129,
      "passes": false,
      "notes": "From PRD US-060"
    },
    {
      "id": "US-130",
      "title": "Artifact editing",
      "description": "As a user, I want to edit generated artifacts directly in the platform.",
      "acceptanceCriteria": [
        "Text files: inline code editor with syntax highlighting",
        "Markdown files: preview mode toggle with rendered markdown",
        "JSON files: formatted editor with validation (red border on invalid JSON)",
        "Version history: each edit creates new version, diff view between versions",
        "Auto-save with 2s debounce",
        "Regenerate button: sends artifact back to agent with modification instructions (text input)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 130,
      "passes": false,
      "notes": "From PRD US-061"
    },
    {
      "id": "US-131",
      "title": "Evaluation schema and evaluators backend",
      "description": "As a developer, I need an evaluation framework with built-in evaluators.",
      "acceptanceCriteria": [
        "Migration: evaluations table (id, name, agent_id, test_cases_json, created_at)",
        "Migration: eval_results table (id, evaluation_id, run_at, results_json, overall_score, pass_rate)",
        "Built-in evaluators: exact_match, contains, regex_match, llm_as_judge, semantic_similarity",
        "POST /api/evaluations/:id/run sends all test cases to agent, scores responses",
        "GET /api/evaluations/:id/results returns scored results",
        "GET/POST /api/evaluations for CRUD",
        "Typecheck passes"
      ],
      "priority": 131,
      "passes": false,
      "notes": "From PRD US-062"
    },
    {
      "id": "US-132",
      "title": "Evaluation UI",
      "description": "As a user, I want to run evaluations on agent responses and track quality.",
      "acceptanceCriteria": [
        "Evaluation page at /evaluations",
        "Create evaluation suite: name, select agent, add test cases",
        "Test case form: input message, expected output (or criteria text), evaluator type dropdown",
        "Run button sends all test cases to agent",
        "Results table: test case, expected, actual, score, pass/fail badge",
        "Aggregate metrics: overall score, pass rate %, average similarity",
        "History chart: scores over time to detect regressions",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 132,
      "passes": false,
      "notes": "From PRD US-062"
    },
    {
      "id": "US-133",
      "title": "Agent benchmarking",
      "description": "As a user, I want to benchmark multiple agents against the same evaluation suite.",
      "acceptanceCriteria": [
        "Benchmark mode: select 2+ agents and an evaluation suite",
        "Run all agents against same test cases",
        "Comparison table: agent names as columns, test cases as rows, scores in cells",
        "Leaderboard view: agents ranked by overall score",
        "Cost-efficiency metric: score per dollar spent",
        "Charts: score comparison bar chart, cost comparison, latency comparison (SVG)",
        "Export results as CSV or JSON",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 133,
      "passes": false,
      "notes": "From PRD US-063"
    },
    {
      "id": "US-134",
      "title": "Safety evaluation and red-teaming",
      "description": "As a user, I want to test agents for safety issues and harmful outputs.",
      "acceptanceCriteria": [
        "Safety evaluation suite with pre-built adversarial test cases",
        "Categories: prompt injection, jailbreak attempts, PII leakage, harmful content, bias detection",
        "Red-team mode: uses AI model to generate adversarial inputs targeting the agent",
        "Safety scores per category with configurable pass/fail thresholds",
        "Report: flagged responses with explanation of the safety concern",
        "Safety policy configuration: define rules for what agent should and shouldn't do",
        "POST /api/evaluations/:id/safety-run endpoint",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 134,
      "passes": false,
      "notes": "From PRD US-064"
    },
    {
      "id": "US-135",
      "title": "Deployment backend and REST API",
      "description": "As a developer, I need deployment infrastructure for agents and workflows as API endpoints.",
      "acceptanceCriteria": [
        "Migration: deployments table (id, entity_type, entity_id, api_key_hash, rate_limit, status, usage_count, created_at)",
        "POST /api/deployments creates deployment, generates API key",
        "GET /api/deployments lists all deployments with stats",
        "DELETE /api/deployments/:id removes deployment",
        "Runtime endpoint: POST /api/deployed/:id/run accepts {input: string}, authenticates via API key header",
        "SSE streaming support for deployed endpoints",
        "Typecheck passes"
      ],
      "priority": 135,
      "passes": false,
      "notes": "From PRD US-065"
    },
    {
      "id": "US-136",
      "title": "Deploy as API UI",
      "description": "As a user, I want to deploy agents as API endpoints with documentation.",
      "acceptanceCriteria": [
        "Deploy as API button on agent and workflow detail pages",
        "Deployment creates endpoint and shows: URL, API key (shown once), usage example (curl)",
        "Auto-generated API documentation (OpenAPI/Swagger spec viewable in browser)",
        "Rate limiting configuration: requests per minute input",
        "Deployment management page at /deployments: list all, status toggle, usage stats",
        "Enable/disable deployment toggle",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 136,
      "passes": false,
      "notes": "From PRD US-065"
    },
    {
      "id": "US-137",
      "title": "Embeddable chat widget",
      "description": "As a user, I want to deploy an agent as an embeddable chat widget for websites.",
      "acceptanceCriteria": [
        "Deploy as Widget option generating a <script> embed code",
        "Widget: floating chat bubble (bottom-right by default), opens into chat panel on click",
        "Customization form: primary color picker, position (bottom-right/bottom-left), welcome message text, avatar URL",
        "Widget uses the deployed API endpoint for communication",
        "Widget preview rendered in the deployment settings page",
        "Copy embed code button",
        "CORS origin configuration input",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 137,
      "passes": false,
      "notes": "From PRD US-066"
    },
    {
      "id": "US-138",
      "title": "Template schema and REST API",
      "description": "As a developer, I need template storage for sharing agent configurations.",
      "acceptanceCriteria": [
        "Migration: templates table (id, name, description, config_json, tools_required, models_required, version, creator_id, created_at)",
        "GET /api/templates with search support",
        "POST /api/templates saves agent config as template (strips credentials)",
        "POST /api/templates/:id/instantiate creates new agent from template",
        "Import/export as JSON files",
        "Template versioning: update creates new version, old versions accessible",
        "Typecheck passes"
      ],
      "priority": 138,
      "passes": false,
      "notes": "From PRD US-067"
    },
    {
      "id": "US-139",
      "title": "Template library UI",
      "description": "As a user, I want to save agents as templates and use community templates.",
      "acceptanceCriteria": [
        "Save as Template button on agent detail page",
        "Template library page at /templates: browse, search by name/description",
        "Template card: name, description, required tools, required models, creator",
        "Template detail page with full config preview",
        "Use Template button creates new agent from template",
        "Import template from JSON file",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 139,
      "passes": false,
      "notes": "From PRD US-067"
    },
    {
      "id": "US-140",
      "title": "Version history backend",
      "description": "As a developer, I need automatic version tracking for agent and workflow configurations.",
      "acceptanceCriteria": [
        "Migration: config_versions table (id, entity_type, entity_id, version_num, config_json, author, summary, tag, created_at)",
        "Every save to agent or workflow auto-creates a new version",
        "GET /api/agents/:id/versions returns version list",
        "GET /api/workflows/:id/versions returns version list",
        "POST /api/agents/:id/versions/:vId/rollback restores version as current",
        "PUT /api/agents/:id/versions/:vId/tag sets label (e.g. 'production', 'v2.1')",
        "Typecheck passes"
      ],
      "priority": 140,
      "passes": false,
      "notes": "From PRD US-068"
    },
    {
      "id": "US-141",
      "title": "Version history UI",
      "description": "As a user, I want to view version history with diff and rollback.",
      "acceptanceCriteria": [
        "Version history page accessible from agent and workflow detail",
        "Version list: version number, timestamp, author, change summary, tag labels",
        "Diff view: select any two versions for side-by-side comparison with highlighted changes",
        "Rollback button: restore selected version as current config (with confirmation)",
        "Add/edit tag labels on versions",
        "Export specific version as JSON",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 141,
      "passes": false,
      "notes": "From PRD US-068"
    },
    {
      "id": "US-142",
      "title": "NL to workflow generation backend",
      "description": "As a developer, I need an AI endpoint that generates workflows from natural language.",
      "acceptanceCriteria": [
        "POST /api/workflows/ai-generate accepts {description: string}",
        "Uses configured default model to generate: node types, node configs, edge connections, positions",
        "POST /api/workflows/:id/ai-refine accepts {instruction: string} to modify existing workflow",
        "Returns workflow JSON (nodes + edges) for canvas rendering",
        "Typecheck passes"
      ],
      "priority": 142,
      "passes": false,
      "notes": "From PRD US-069"
    },
    {
      "id": "US-143",
      "title": "NL to workflow UI",
      "description": "As a user, I want to describe a workflow in natural language and have AI generate it.",
      "acceptanceCriteria": [
        "AI Generate button on empty canvas or in canvas toolbar",
        "Text input modal: describe the workflow you want",
        "Loading state while AI generates",
        "Generated workflow appears on canvas for review and editing",
        "Refine button: describe modifications in natural language to update the workflow",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 143,
      "passes": false,
      "notes": "From PRD US-069"
    },
    {
      "id": "US-144",
      "title": "AI-assisted prompt optimization",
      "description": "As a user, I want AI help improving my system prompts based on results.",
      "acceptanceCriteria": [
        "Optimize Prompt button in the Prompt IDE / system prompt editor",
        "AI analyzes: current prompt text, evaluation results (if available), recent conversation logs",
        "Suggests improved prompt with tracked changes shown in diff view",
        "Optimization strategies dropdown: clarity, specificity, safety, conciseness",
        "Accept all changes, selectively accept individual changes, or reject all",
        "Optimization history: track which changes improved eval scores",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 144,
      "passes": false,
      "notes": "From PRD US-070"
    },
    {
      "id": "US-145",
      "title": "MCP client backend",
      "description": "As a developer, I need MCP server integration for external tool discovery.",
      "acceptanceCriteria": [
        "Migration: mcp_servers table (id, name, url, auth_config_json, status, created_at)",
        "GET/POST /api/integrations/mcp for server management",
        "POST /api/integrations/mcp/:id/discover queries MCP server for available tools",
        "Discovered tools stored in tools table with tool_type='mcp' and source reference",
        "Connection health monitoring: periodic ping, status updates",
        "Typecheck passes"
      ],
      "priority": 145,
      "passes": false,
      "notes": "From PRD US-071"
    },
    {
      "id": "US-146",
      "title": "MCP client UI",
      "description": "As a user, I want to connect to MCP servers and discover tools.",
      "acceptanceCriteria": [
        "Settings > Integrations > MCP Servers section",
        "Add MCP server form: URL, authentication config, display name",
        "Discover Tools button that queries server and shows discovered tools",
        "Discovered tools appear in tool library with 'MCP' badge",
        "MCP tools assignable to agents like any other tool",
        "Connection health status indicator per server (green/red)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 146,
      "passes": false,
      "notes": "From PRD US-071"
    },
    {
      "id": "US-147",
      "title": "Webhook triggers backend",
      "description": "As a developer, I need webhook URL generation and trigger execution.",
      "acceptanceCriteria": [
        "Migration: webhooks table (id, workflow_id, hook_id, url_token, enabled, request_log_json, created_at)",
        "Auto-generated webhook URLs: /api/webhooks/:workflowId/:hookId",
        "POST to webhook URL triggers workflow execution with payload as input variables",
        "Notification templates: Slack webhook, Discord webhook, email SMTP config",
        "Webhook request log: last N requests with payload and response status",
        "URL management: regenerate token, enable/disable",
        "Typecheck passes"
      ],
      "priority": 147,
      "passes": false,
      "notes": "From PRD US-072"
    },
    {
      "id": "US-148",
      "title": "Webhook and notification UI",
      "description": "As a user, I want webhook triggers on workflows and outgoing notifications.",
      "acceptanceCriteria": [
        "Webhook Trigger node type in canvas sidebar",
        "Node config shows generated webhook URL with copy button",
        "URL management: view, regenerate, disable toggle",
        "Notification node type: configure outgoing HTTP POST on workflow events",
        "Pre-built notification templates: Slack, Discord, email (with config forms)",
        "Request log view: recent incoming webhook requests with payload preview",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 148,
      "passes": false,
      "notes": "From PRD US-072"
    },
    {
      "id": "US-149",
      "title": "External observability integration",
      "description": "As a user, I want to export traces to external observability platforms.",
      "acceptanceCriteria": [
        "Settings > Integrations > Observability section",
        "Supported platforms: Langfuse, LangSmith, Datadog, Opik, Custom Webhook",
        "Per-integration config form: API key, endpoint URL, project/dataset name",
        "Enable/disable toggle per integration",
        "Trace export includes: all LLM calls, tool calls, agent steps, token usage, latency",
        "Test Integration button that sends a sample trace and shows success/error",
        "Leverages orbiter-observability integration support",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 149,
      "passes": false,
      "notes": "From PRD US-073"
    },
    {
      "id": "US-150",
      "title": "Mobile monitoring dashboard",
      "description": "As a user, I want to monitor agent runs from my phone.",
      "acceptanceCriteria": [
        "Dashboard metric cards stack vertically on mobile (< md breakpoint)",
        "Run list: simplified card view showing status, agent, duration, cost",
        "Run detail: scrollable trace view optimized for mobile",
        "Active run: streaming status updates work on mobile",
        "Pull-to-refresh on list pages (via touch gesture detection)",
        "Bottom navigation bar replaces sidebar on mobile",
        "Touch-optimized: large tap targets (min 44px), swipe gestures for common actions",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 150,
      "passes": false,
      "notes": "From PRD US-074"
    },
    {
      "id": "US-151",
      "title": "Mobile playground",
      "description": "As a user, I want a simplified chat playground usable on mobile.",
      "acceptanceCriteria": [
        "Chat interface fills screen on mobile",
        "Compact agent selector in header (dropdown, not sidebar)",
        "Trace panel accessible via toggle button (not always visible on mobile)",
        "Voice input button prominently displayed",
        "Message input pinned to bottom with keyboard avoidance",
        "Smooth scrolling with auto-scroll to newest message",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 151,
      "passes": false,
      "notes": "From PRD US-075"
    },
    {
      "id": "US-152",
      "title": "In-app documentation",
      "description": "As a user, I need built-in documentation and contextual help.",
      "acceptanceCriteria": [
        "Help icon (?) in sidebar opening a docs panel",
        "Contextual help: tooltip/info buttons on key forms linking to relevant docs",
        "Searchable documentation pages (Astro content collection for docs)",
        "Getting started guide: step-by-step creating first agent",
        "API reference section: documents all REST endpoints",
        "Keyboard shortcut reference panel (Cmd+/ to open)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 152,
      "passes": false,
      "notes": "From PRD US-076"
    },
    {
      "id": "US-153",
      "title": "Interactive onboarding tour",
      "description": "As a new user, I want a guided tour of the platform features.",
      "acceptanceCriteria": [
        "First-login detection triggers onboarding tour prompt",
        "Guided tour: sequential highlights of UI elements with step-by-step explanations",
        "Tour steps: create project, configure model provider, create agent, test in playground",
        "Skip button on every step",
        "Show Tour Again button in Settings page",
        "Tour completion state persisted (don't re-show after completion)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 153,
      "passes": false,
      "notes": "From PRD US-077"
    }
  ]
}
